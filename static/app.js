var canvas=document.getElementById("canvas");const hasCanvas=null!=canvas;var socket=null;const socketConnect=()=>{(socket=io()).on("air",a=>{updateAir(a)}),hasCanvas&&socket.on("led",a=>{updateLed(a)})},updateAir=a=>{let e=new Uint8Array(a);for(var t=0;t<6;t++)e[t]?document.getElementById("air"+t).setAttribute("data-active",""):document.getElementById("air"+t).removeAttribute("data-active")};let updateLed;if(hasCanvas){var a=canvas.getContext("2d"),e=a.getImageData(0,0,33,1);let t=()=>{for(var a=0;a<33;a++)e.data[4*a+3]=255};t(),updateLed=t=>{let o=new Uint8Array(t);for(var r=0;r<32;r++)e.data[4*r]=o[(31-r)*3+1],e.data[4*r+1]=o[(31-r)*3+2],e.data[4*r+2]=o[(31-r)*3+0];e.data[128]=o[94],e.data[129]=o[95],e.data[130]=o[93],a.putImageData(e,0,0)}}const readConfig=a=>{var e="",t=a.background_color||"rbga(0, 0, 0, 0.9)";a.background_image?e+=`body {background: ${t} url("${a.bgImage}") fixed center / cover!important; background-repeat: no-repeat;} `:e+=`body {background: ${t};} `,"number"==typeof a.led_opacity&&(0===a.led_opacity?e+="#canvas {display: none} ":e+=`#canvas {opacity: ${a.ledOpacity}} `),"string"==typeof a.key_border_color&&(e+=`.key {border: 1px solid ${a.keyBorderColor};} `),"string"==typeof a.air_key_active_color&&(e+=`.key.air[data-active] {background-color: ${a.air_key_active_color};} `);var o=document.createElement("style");o.innerHTML=e,document.head.appendChild(o)},requestConfig=()=>{fetch("/config").then(a=>a.json()).then(a=>readConfig(a))},initialize=()=>{requestConfig(),socketConnect()};initialize();